# ğŸ¯ MBTI ì§„ë¡œ ì¶”ì²œ ì›¹ì•± â€“ Spark!
# ì‹¤í–‰ ë°©ë²•:
#   1. pip install streamlit
#   2. streamlit run streamlit_mbti_career_app.py

import streamlit as st
from datetime import datetime
import textwrap

st.set_page_config(
    page_title="MBTI ì§„ë¡œ ì¶”ì²œ â€¢ Spark!",
    page_icon="âœ¨",
    layout="wide"
)

# ------------------------------
# ğŸŒˆ ìŠ¤íƒ€ì¼
# ------------------------------
st.markdown("""
<style>
@import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap');
html, body, [class*="css"] {
    font-family: 'Pretendard', sans-serif;
}
.hero {
    background: linear-gradient(135deg, #9333EA, #3B82F6, #EC4899);
    color: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}
.card {
    background: rgba(255,255,255,0.8);
    border-radius: 16px;
    padding: 18px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    margin-bottom: 12px;
}
.tag {
    display:inline-block;
    padding:6px 10px;
    margin:4px;
    background:rgba(59,130,246,0.1);
    border-radius:10px;
    font-weight:600;
}
</style>
""", unsafe_allow_html=True)

# ------------------------------
# ğŸ§© MBTI ë°ì´í„°
# ------------------------------
MBTI_INFO = {
    "INTJ": {
        "title": "INTJ â€“ ì „ëµê°€ ğŸ§ ğŸ—ºï¸",
        "traits": ["ë¶„ì„ì ", "ë…ë¦½ì ", "ê³„íšì ", "í˜ì‹ ì "],
        "careers": ["ë°ì´í„° ê³¼í•™ì", "AI ì—°êµ¬ì›", "ì „ëµ ì»¨ì„¤í„´íŠ¸", "ë„ì‹œ ê³„íšê°€", "ì œí’ˆ ë§¤ë‹ˆì €"],
        "study": ["ìˆ˜í•™", "í†µê³„", "ì»´í“¨í„° ê³¼í•™", "ê²½ì œ"],
        "activities": ["ë°ì´í„° ë¶„ì„ í”„ë¡œì íŠ¸", "ë¬¸ì œ í•´ê²° ê²½ì§„ëŒ€íšŒ", "ì¥ê¸° ë¡œë“œë§µ ì„¤ê³„"]
    },
    "INFP": {
        "title": "INFP â€“ ì´ìƒê°€ ğŸŒˆğŸ•Šï¸",
        "traits": ["ì°½ì˜ì ", "ê°€ì¹˜ì¤‘ì‹¬", "ê°ì„±ì ", "ììœ¨ì "],
        "careers": ["ì‘ê°€", "ë””ìì´ë„ˆ", "ì‚¬íšŒì  ê¸°ì—…ê°€", "ë§ˆì¼€í„°", "ìŠ¤í† ë¦¬í…”ëŸ¬"],
        "study": ["ë¬¸í•™", "ì‹¬ë¦¬í•™", "ì˜ˆìˆ ", "ë¯¸ë””ì–´"],
        "activities": ["ì°½ì‘ ì›Œí¬ìˆ", "ë…ì„œ í† ë¡ ", "ì‚¬íšŒ ìº í˜ì¸"]
    },
    "ENTP": {
        "title": "ENTP â€“ ë°œëª…ê°€ âš™ï¸ğŸ’¡",
        "traits": ["ì°½ì˜ì ", "ë„ì „ì ", "ë…¼ë¦¬ì ", "ì¦‰í¥ì "],
        "careers": ["í˜ì‹  ì»¨ì„¤í„´íŠ¸", "ì œí’ˆ ë””ìì´ë„ˆ", "í¬ë¦¬ì—ì´í„°", "ìŠ¤íƒ€íŠ¸ì—… ì°½ì—…ì", "ë§ˆì¼€íŒ… ì „ëµê°€"],
        "study": ["ë””ìì¸", "ë§ˆì¼€íŒ…", "ê¸°ìˆ  ì°½ì—…", "ìŠ¤í† ë¦¬í…”ë§"],
        "activities": ["í•´ì»¤í†¤", "í”¼ì¹˜ë°í¬ ê²½ì§„ëŒ€íšŒ", "ë””ìì¸ ì±Œë¦°ì§€"]
    },
    "ISFP": {
        "title": "ISFP â€“ ì˜ˆìˆ ê°€ ğŸ¨ğŸƒ",
        "traits": ["ê°ì„±ì ", "ì˜ˆìˆ ì ", "ììœ ë¡œì›€", "ì¡°ìš©í•œ í—Œì‹ "],
        "careers": ["ê·¸ë˜í”½ ë””ìì´ë„ˆ", "ì‚¬ì§„ì‘ê°€", "ì˜ìƒí¸ì§‘ì", "ê³µì˜ˆê°€", "UI ë””ìì´ë„ˆ"],
        "study": ["ì‹œê°ë””ìì¸", "ìƒ‰ì±„í•™", "ë¯¸ë””ì–´", "ë¯¸í•™"],
        "activities": ["í¬íŠ¸í´ë¦¬ì˜¤ ì œì‘", "ìŠ¤ì¼€ì¹˜ë¶ ì¼ê¸°", "ë¸Œëœë”© ì‹¤ìŠµ"]
    },
    "ENFP": {
        "title": "ENFP â€“ ìº í˜ì´ë„ˆ ğŸ‰ğŸš€",
        "traits": ["ì—´ì •ì ", "ì‚¬êµì ", "ì•„ì´ë””ì–´ í’ë¶€", "ììœ ë¡œì›€"],
        "careers": ["ë§ˆì¼€í„°", "ì½˜í…ì¸  ê¸°íšì", "ì—ë“€í…Œí¬ PM", "í™ë³´ ì „ë¬¸ê°€", "ì´ë²¤íŠ¸ í”Œë˜ë„ˆ"],
        "study": ["ë¯¸ë””ì–´", "êµìœ¡ê³µí•™", "ë§ˆì¼€íŒ…", "ì°½ì—…"],
        "activities": ["í™ë³´ ìº í˜ì¸ ê¸°íš", "í•´ì»¤í†¤ ì°¸ê°€", "ì˜ìƒ ì œì‘"]
    }
}

ALL_TYPES = list(MBTI_INFO.keys())

# ------------------------------
# ğŸ¨ í—¤ë”
# ------------------------------
st.markdown(f"""
<div class='hero'>
    <h1>âœ¨ MBTI ì§„ë¡œ ì¶”ì²œ â€¢ Spark!</h1>
    <h3>ë‚˜ì˜ ì„±í–¥ì— ë”± ë§ëŠ” ë¯¸ë˜ ì§ì—…ì„ ì°¾ì•„ë³´ì ğŸ”</h3>
    <p>ìê¸°ì´í•´ â€¢ ì§„ë¡œíƒìƒ‰ â€¢ í•™ìŠµì „ëµ â€¢ í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´</p>
</div>
""", unsafe_allow_html=True)

st.write("")

# ------------------------------
# ğŸ¯ ì„ íƒ ì˜ì—­
# ------------------------------
col1, col2 = st.columns(2)
with col1:
    mbti = st.selectbox("ğŸ‘‰ MBTI ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”", ALL_TYPES, index=0)
with col2:
    goal = st.text_input("ğŸŒŸ ê´€ì‹¬ ìˆëŠ” ì§„ë¡œ ë¶„ì•¼ (ì„ íƒ)", placeholder="ì˜ˆ: ê°œë°œì, ë””ìì´ë„ˆ, êµì‚¬, ì°½ì—…ê°€...")

info = MBTI_INFO[mbti]

# ------------------------------
# ğŸ’¼ ê²°ê³¼ ì¹´ë“œ
# ------------------------------
st.markdown(f"""
<div class='card'>
<h2>{info['title']}</h2>
<p><b>í•µì‹¬ ì„±í–¥:</b> {' Â· '.join(info['traits'])}</p>
{f"<p><b>ê´€ì‹¬ ë¶„ì•¼:</b> {goal}</p>" if goal else ""}
</div>
""", unsafe_allow_html=True)

col3, col4 = st.columns(2)
with col3:
    st.markdown("### ğŸ’¼ ì¶”ì²œ ì§ì—…")
    for job in info["careers"]:
        st.markdown(f"- {job}")

with col4:
    st.markdown("### ğŸ“š ì¶”ì²œ í•™ìŠµ/í™œë™")
    st.markdown("**ì¶”ì²œ ê³¼ëª©**: " + ", ".join(info["study"]))
    st.markdown("**í™œë™ ì•„ì´ë””ì–´**: " + ", ".join(info["activities"]))

# ------------------------------
# ğŸ’¡ í•™ìŠµ ë£¨í‹´
# ------------------------------
with st.expander("ğŸ’¡ 4ì£¼ ì§„ë¡œ íƒìƒ‰ ë£¨í‹´ ë³´ê¸°"):
    st.markdown("""
    **1ì£¼ì°¨**: ê´€ì‹¬ ë¶„ì•¼ ì¡°ì‚¬ ë° í‚¤ì›Œë“œ ì •ë¦¬ ğŸ”  
    **2ì£¼ì°¨**: ê´€ë ¨ ì‹¤ìŠµ/ì²´í—˜ í™œë™ ğŸ§ª  
    **3ì£¼ì°¨**: í¬íŠ¸í´ë¦¬ì˜¤/ë°œí‘œ ì¤€ë¹„ ğŸ“˜  
    **4ì£¼ì°¨**: í”¼ë“œë°± ë°›ê³  ê³„íš ë³´ì™„í•˜ê¸° ğŸ§­
    """)

# ------------------------------
# ğŸ“¥ ë‹¤ìš´ë¡œë“œ
# ------------------------------
plan = textwrap.dedent(f"""
[MBTI ì§„ë¡œ ì¶”ì²œ ê²°ê³¼]
ìœ í˜•: {mbti} ({info['title']})
ê´€ì‹¬ ë¶„ì•¼: {goal or 'ë¯¸ì…ë ¥'}

í•µì‹¬ ì„±í–¥: {', '.join(info['traits'])}
ì¶”ì²œ ì§ì—…: {', '.join(info['careers'])}
ì¶”ì²œ ê³¼ëª©: {', '.join(info['study'])}
í™œë™ ì•„ì´ë””ì–´: {', '.join(info['activities'])}
""")

st.download_button("ğŸ“¥ ë‚´ ì§„ë¡œ ì¶”ì²œ ê²°ê³¼ ì €ì¥í•˜ê¸°", data=plan, file_name=f"{mbti}_ì§„ë¡œì¶”ì²œ.txt")

st.snow()
